(this["webpackJsonpmy-react"]=this["webpackJsonpmy-react"]||[]).push([[0],{227:function(e,t,a){e.exports=a(451)},232:function(e,t,a){},233:function(e,t,a){},234:function(e,t,a){},352:function(e,t,a){},353:function(e,t,a){},413:function(e,t,a){},414:function(e,t,a){},417:function(e,t,a){},418:function(e,t,a){},419:function(e,t,a){},443:function(e,t,a){},444:function(e,t,a){},445:function(e,t,a){},446:function(e,t,a){},447:function(e,t,a){},451:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(4),i=a.n(l),o=(a(232),a(12)),c=a(9),s=a(14),u=a(13),m=(a(233),a(27)),d=a(19),p=(a(234),a(458)),h=a(459),f=a(26),g=a(463),b=a(464),y=a(24),E=a(154),v=a.n(E),k=a(69);var C=Object(k.c)({isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SET_IS_LOADING"===t.type&&(e=t.value),e},userInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"SET_USER_INFO"===t.type&&(e=Object.assign({},e,t.value)),e},cateList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_CATE_LIST"===t.type&&(e=t.value.slice()),e}}),O=a(193),j=Object(k.d)(C,Object(k.a)(O.a));function I(e){return{type:"SET_IS_LOADING",value:e}}function L(e){return{type:"SET_USER_INFO",value:e}}var S=a(460);function w(e,t){return j.dispatch(I(!0)),v.a.get(e,{params:t}).then((function(e){return j.dispatch(I(!1)),e.data.err?S.a.error(e.data.msg):S.a.success(e.data.msg),Promise.resolve(e)})).catch((function(e){j.dispatch(I(!1)),S.a.error("\u7f51\u7edc\u6545\u969c")}))}function q(e,t,a){return j.dispatch(I(!0)),v.a.post(e,t,a).then((function(e){return j.dispatch(I(!1)),e.data.err?S.a.error(e.data.msg):S.a.success(e.data.msg),Promise.resolve(e)})).catch((function(e){return j.dispatch(I(!1)),S.a.error("\u7f51\u7edc\u6545\u969c"),Promise.reject(e)}))}var P={login:"/user/login",isLogin:"/user/islogin",addCategory:"/category/add",categoryList:"/category/list",editCategory:"/category/update",getCategory:"/category/query",uploadOne:"/upload/single",uploadMany:"/upload/multiple",addGood:"/good/add"};function F(e){return function(e){return w(P.categoryList).then((function(t){return e({type:"SET_CATE_LIST",value:t.data.data}),Promise.resolve(t)}))}}function A(e){return function(t){return q(P.editCategory,e).then((function(e){return Promise.resolve(e)}))}}var N=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).bindAll(["loginSubmmit"]),n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Login-root"},r.a.createElement("h1",{className:"Login-title"},"\u5546\u54c1\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"),r.a.createElement("div",{className:"Login-login-box"},r.a.createElement("h2",null,"\u7528\u6237\u767b\u5f55"),r.a.createElement(p.a,{name:"basic",onFinish:this.loginSubmmit,initialValues:{account:"admin",psw:"123456"}},r.a.createElement(p.a.Item,{label:"\u8d26\u53f7",name:"account",rules:[{required:!0,message:"\u8d26\u53f7\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(h.a,{prefix:r.a.createElement(g.a,null)})),r.a.createElement(p.a.Item,{label:"\u5bc6\u7801",name:"psw",rules:[{required:!0,message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(h.a.Password,{prefix:r.a.createElement(b.a,null)})),r.a.createElement(p.a.Item,{wrapperCol:{offset:20,span:4}},r.a.createElement(f.a,{type:"primary",htmlType:"submit",className:"Login-commit-btn"},"\u767b\u5f55")))))}}]),Object(c.a)(a,[{key:"loginSubmmit",value:function(e){var t=this;this.props.queryLogin(e).then((function(e){0===e.data.err&&t.props.history.push("/")}))}}]),a}(r.a.Component);var T=N=Object(y.b)((function(e){return{}}),(function(e,t){return{queryLogin:function(t){return e(function(e){return function(t){return q(P.login,e).then((function(e){return t(L(e.data.userInfo)),Promise.resolve(e)}))}}(t))}}}))(N),x=(a(352),a(72)),_=a(456),R=a(125),K=a(469),D=a(470),H=a(471),U=a(472),M=a(473),G=(a(353),a(461)),V=a(454),W=a(465),B=a(466),X=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).bindAll(["f5Press","availableChange"]),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=[{title:"\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u4ecb\u7ecd",dataIndex:"introduce",key:"introduce"},{title:"\u53ef\u7528",dataIndex:"available",key:"available",render:function(t,a){return r.a.createElement(G.a,{defaultChecked:t,onChange:function(t){e.availableChange(a._id,t)}})}},{title:"\u4fee\u6539",key:"edit",render:function(e,t){return r.a.createElement(m.b,{to:{pathname:"/home/cate-edit",search:"?_id=".concat(t._id),state:{name:t.name}},style:{fontSize:"28px"}},r.a.createElement(W.a,null))}}];return r.a.createElement("div",null,r.a.createElement("h3",null,"\u6240\u6709\u5206\u7c7b\uff1a"),r.a.createElement("div",{className:"CateList-btn-box"},r.a.createElement(f.a,{type:"primary",icon:r.a.createElement(B.a,null),onClick:this.props.queryCateList},"\u5237\u65b0(F5)")),r.a.createElement(V.a,{columns:t,dataSource:this.props.cateList,rowKey:"_id",pagination:!1}),r.a.createElement("div",{className:"CateList-btn-box"},r.a.createElement(f.a,{type:"primary",icon:r.a.createElement(B.a,null),onClick:this.props.queryCateList},"\u5237\u65b0(F5)")))}}]),Object(c.a)(a,[{key:"f5Press",value:function(e){116==e.keyCode&&(e.preventDefault(),this.props.queryCateList())}},{key:"componentDidMount",value:function(){this.props.queryCateList(),document.body.addEventListener("keydown",this.f5Press)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.f5Press)}},{key:"availableChange",value:function(e,t){this.props.queryEditCate({_id:e,available:t})}}]),a}(r.a.Component);var z=X=Object(y.b)((function(e){return{cateList:e.cateList}}),(function(e,t){return{queryCateList:function(t){return e(F())},queryEditCate:function(t){return e(A(t))}}}))(X),J=(a(413),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).form=r.a.createRef(),n.bindAll(["categorySubmit"]),n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"\u6dfb\u52a0\u5206\u7c7b"),r.a.createElement(p.a,Object.assign({},{labelCol:{span:3},wrapperCol:{span:14}},{onFinish:this.categorySubmit,ref:this.form}),r.a.createElement(p.a.Item,{name:"name",label:"\u5206\u7c7b\u540d\u79f0",rules:[{required:!0,message:"\u5206\u7c7b\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(h.a,null)),r.a.createElement(p.a.Item,{name:"introduce",label:"\u5206\u7c7b\u4ecb\u7ecd",rules:[{required:!0,message:"\u5206\u7c7b\u4ecb\u7ecd\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(h.a.TextArea,null)),r.a.createElement(p.a.Item,{wrapperCol:{offset:16}},r.a.createElement(f.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"))))}}]),Object(c.a)(a,[{key:"categorySubmit",value:function(e){var t=this;console.log(e),this.props.queryAddCate(e).then((function(e){e.data.err||t.form.current.resetFields()}))}}]),a}(r.a.Component));var Q=J=Object(y.b)((function(e){return{}}),(function(e,t){return{queryAddCate:function(t){return e(function(e){return function(t){return q(P.addCategory,e).then((function(e){return Promise.resolve(e)}))}}(t))}}}))(J),$=a(224),Y=(a(414),a(207)),Z=a.n(Y),ee=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={cate:null},n.bindAll(["categorySubmit"]),n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"\u7f16\u8f91\u5206\u7c7b"),this.state.cate&&r.a.createElement(p.a,Object.assign({},{labelCol:{span:3},wrapperCol:{span:14}},{onFinish:this.categorySubmit,ref:this.form,initialValues:{name:this.state.cate.name,introduce:this.state.cate.introduce,available:this.state.cate.available}}),r.a.createElement(p.a.Item,{name:"name",label:"\u5206\u7c7b\u540d\u79f0",rules:[{required:!0,message:"\u5206\u7c7b\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(h.a,null)),r.a.createElement(p.a.Item,{name:"introduce",label:"\u5206\u7c7b\u4ecb\u7ecd",rules:[{required:!0,message:"\u5206\u7c7b\u4ecb\u7ecd\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(h.a.TextArea,null)),r.a.createElement(p.a.Item,{name:"available",label:"\u53ef\u7528",wrapperCol:{offset:0},valuePropName:"checked"},r.a.createElement(G.a,null)),r.a.createElement(p.a.Item,{wrapperCol:{offset:16}},r.a.createElement(f.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"))))}}]),Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.search,a=Z.a.parse(t,{ignoreQueryPrefix:!0})._id;this.props.queryCategory({_id:a}).then((function(t){console.log(t),e.setState({cate:t.data.data})}))}},{key:"categorySubmit",value:function(e){var t=Object($.a)({_id:this.state.cate._id},e);this.props.queryEditCate(t)}}]),a}(r.a.Component);var te=ee=Object(y.b)((function(e){return{}}),(function(e,t){return{queryCategory:function(t){return e(function(e){return function(t){return w(P.getCategory,e).then((function(e){return Promise.resolve(e)}))}}(t))},queryEditCate:function(t){return e(A(t))}}}))(ee),ae=(a(417),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),a}(r.a.Component)),ne=(a(418),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),a}(r.a.Component)),re=a(159),le=(a(419),a(95)),ie=a(462),oe=a(455),ce=a(452),se=a(453),ue=a(86),me=a(457),de=a(467),pe=a(468),he=a(208),fe=a.n(he),ge=le.a.Option,be=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={image:[],images:[],showAddSpec:!1,specs:[]},n.specForm=r.a.createRef(),n.goodForm=r.a.createRef(),n.bindAll(["imageChange","imagesChange","refreshCategorys","formSubmit","toggleAddSpec","addSpec","submitSpecForm"]),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,r.a.createElement(de.a,null),r.a.createElement("div",{className:"ant-upload-text"},"\u9009\u62e9\u56fe\u7247"));return r.a.createElement("div",null,r.a.createElement("h3",null,"\u6dfb\u52a0\u5546\u54c1"),r.a.createElement(p.a,Object.assign({},{labelCol:{span:3},wrapperCol:{span:14}},{onFinish:this.formSubmit,ref:this.goodForm}),r.a.createElement(p.a.Item,{name:"name",label:"\u5546\u54c1\u540d\u79f0",rules:[{required:!0,message:"\u5546\u54c1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(h.a,null)),r.a.createElement(p.a.Item,{name:"number",label:"\u5546\u54c1\u5e93\u5b58",rules:[{required:!0,message:"\u5546\u54c1\u5e93\u5b58\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(h.a,null)),r.a.createElement(p.a.Item,{name:"price",label:"\u5546\u54c1\u4ef7\u683c",rules:[{required:!0,message:"\u5546\u54c1\u4ef7\u683c\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(ie.a,{min:0,step:.1})),r.a.createElement(p.a.Item,{name:"introduce",label:"\u5546\u54c1\u63cf\u8ff0",rules:[{required:!0,message:"\u5546\u54c1\u63cf\u8ff0\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(fe.a,null)),r.a.createElement(p.a.Item,{name:"image",label:"\u5546\u54c1\u56fe\u7247",rules:[{required:!0,message:"\u5546\u54c1\u56fe\u7247\u4e0d\u80fd\u4e3a\u7a7a!"}],valuePropName:"fileList"},r.a.createElement(oe.a,{name:"image2",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,onChange:this.imageChange,customRequest:function(){},fileList:this.state.image},this.state.image.length>0?r.a.createElement("img",{src:URL.createObjectURL(this.state.image[0].originFileObj),className:"GoodAdd-pic"}):t)),r.a.createElement(p.a.Item,{name:"images",label:"\u5546\u54c1\u8f6e\u64ad\u56fe",rules:[function(e){e.getFieldValue;return{validator:function(e,t){return t&&t.length>=2?Promise.resolve():Promise.reject("\u56fe\u7247\u81f3\u5c112\u5f20")}}}],valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList}},r.a.createElement(oe.a,{listType:"picture-card",className:"avatar-uploader",showUploadList:!0,onChange:this.imagesChange,customRequest:function(){},fileList:this.state.images,multiple:!0},this.state.images.length<9&&t)),r.a.createElement(p.a.Item,{label:"\u5237\u65b0\u5206\u7c7b"},r.a.createElement(f.a,{type:"primary",icon:r.a.createElement(B.a,null),onClick:this.refreshCategorys})),r.a.createElement(p.a.Item,{name:"category",label:"\u5546\u54c1\u5206\u7c7b"},r.a.createElement(le.a,{defaultValue:"",style:{width:150}},this.props.cateList.map((function(e){return r.a.createElement(ge,{value:e._id,key:e._id,disabled:!e.available},e.name)})))),this.state.specs.length>0&&r.a.createElement(ce.a,null,r.a.createElement(se.a,{offset:"3",span:"21"},r.a.createElement(V.a,{rowKey:"name",dataSource:this.state.specs,pagination:!1,columns:[{title:"\u89c4\u683c\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u89c4\u683c\u5e93\u5b58",dataIndex:"number",key:"number"},{title:"\u89c4\u683c\u4ef7\u683c",dataIndex:"price",key:"price"},{title:"\u5220\u9664",key:"delete",render:function(t,a,n){return r.a.createElement(pe.a,{className:"GoodAdd-delete-btn",onClick:function(){e.state.specs.splice(n,1),e.setState({specs:Object(re.a)(e.state.specs)})}})}}]}))),r.a.createElement(p.a.Item,{label:"\u6dfb\u52a0\u89c4\u683c"},r.a.createElement(ue.a,{title:"\u70b9\u51fb\u6dfb\u52a0\u89c4\u683c"},r.a.createElement(f.a,{type:"primary",icon:r.a.createElement(de.a,null),onClick:this.toggleAddSpec}))),r.a.createElement(p.a.Item,{wrapperCol:{offset:16}},r.a.createElement(f.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"))),r.a.createElement(me.a,{zIndex:1e7,title:"\u6dfb\u52a0\u89c4\u683c",visible:this.state.showAddSpec,onOk:this.submitSpecForm,onCancel:function(){e.setState({showAddSpec:!1})}},r.a.createElement(p.a,{labelCol:{span:8},wrapperCol:{span:16},ref:this.specForm,onFinish:this.addSpec},r.a.createElement(p.a.Item,{name:"name",label:"\u89c4\u683c\u540d\u79f0",rules:[{required:!0,message:"\u89c4\u683c\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(h.a,null)),r.a.createElement(p.a.Item,{name:"number",label:"\u89c4\u683c\u5e93\u5b58",rules:[{required:!0,message:"\u89c4\u683c\u5e93\u5b58\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(h.a,null)),r.a.createElement(p.a.Item,{name:"price",label:"\u89c4\u683c\u4ef7\u683c",rules:[{required:!0,message:"\u89c4\u683c\u4ef7\u683c\u4e0d\u80fd\u4e3a\u7a7a!"}]},r.a.createElement(h.a,null)))))}}]),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.refreshCategorys()}},{key:"refreshCategorys",value:function(){this.props.queryCateList()}},{key:"imageChange",value:function(e){var t=[];t=e.fileList.length>1?[e.fileList[e.fileList.length-1]]:Object(re.a)(e.fileList),this.setState({image:t})}},{key:"imagesChange",value:function(e){console.log(e);var t=e.fileList.slice();t.length>9&&(t=t.slice(0,9)),t.forEach((function(e){e.status="done"})),this.setState({images:t})}},{key:"toggleAddSpec",value:function(){this.setState({showAddSpec:!0})}},{key:"submitSpecForm",value:function(){this.specForm.current.submit()}},{key:"addSpec",value:function(e){console.log(e);var t=this.state.specs.slice();t.push(e),this.setState({specs:t,showAddSpec:!1}),this.specForm.current.resetFields()}},{key:"formSubmit",value:function(e){var t=this;console.log(e);var a=e.image,n=e.images,r=e.name,l=e.number,i=e.price,o=e.introduce,c=e.category,s=new FormData;s.append("img",a.file.originFileObj);var u=this.props.uploadOne(s,{"Content-Type":"multipart/form-data"}),m=new FormData;n.forEach((function(e){m.append("img",e.originFileObj)}));var d=this.props.uploadMany(m,{"Content-Type":"multipart/form-data"});Promise.all([u,d]).then((function(e){var a=e[0].data.fileUrl,n=e[1].data.fileUrl,s={name:r,number:l,price:i,introduce:o,image:a,images:n};return c&&(s.category=c),t.state.specs.length>0&&(s.spec=t.state.specs),t.props.queryAddGood(s)})).then((function(e){e.data.err||(t.goodForm.current.resetFields(),t.specForm.current.resetFields(),t.setState({image:[],images:[]}))})).catch((function(e){}))}}]),a}(r.a.Component);var ye=be=Object(y.b)((function(e){return{cateList:e.cateList}}),(function(e,t){return{queryCateList:function(t){return e(F())},uploadOne:function(t,a){return e(function(e,t){return function(a){return q(P.uploadOne,e,t).then((function(e){return Promise.resolve(e)}))}}(t,a))},uploadMany:function(t,a){return e(function(e,t){return function(a){return q(P.uploadMany,e,t).then((function(e){return Promise.resolve(e)}))}}(t,a))},queryAddGood:function(t){return e(function(e){return function(t){return q(P.addGood,e).then((function(e){return Promise.resolve(e)}))}}(t))}}}))(be),Ee=(a(443),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"\u6240\u6709\u5546\u54c1"))}}]),a}(r.a.Component)),ve=(a(444),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),a}(r.a.Component)),ke=(a(445),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),a}(r.a.Component)),Ce=(a(446),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),a}(r.a.Component)),Oe=(a(447),[{key:"/home/cate-list",title:"\u67e5\u770b\u5206\u7c7b",page:z},{key:"/home/cate-add",title:"\u6dfb\u52a0\u5206\u7c7b",page:Q},{key:"/home/admin-add",title:"\u6dfb\u52a0\u7ba1\u7406\u5458",page:ae},{key:"/home/change-pass",title:"\u4fee\u6539\u5bc6\u7801",page:ne},{key:"/home/good-add",title:"\u6dfb\u52a0\u5546\u54c1",page:ye},{key:"/home/good-list",title:"\u67e5\u770b\u5546\u54c1",page:Ee},{key:"/home/order-list",title:"\u67e5\u770b\u8ba2\u5355",page:ve},{key:"/home/statement",title:"\u6570\u636e\u7edf\u8ba1",page:ke},{key:"/home/swiper-edit",title:"\u8bbe\u7f6e\u8f6e\u64ad\u56fe",page:Ce},{key:"/home/user-add",title:"\u6dfb\u52a0\u7528\u6237",page:function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),a}(r.a.Component)}]),je=[{key:"/home/cate-edit",title:"\u4fee\u6539\u5206\u7c7b",page:te}];var Ie=function(e){var t=Oe.find((function(t){return t.key===e}));return t?t=Object.assign({},t):(t=je.find((function(t){return e.startsWith(t.key)})))?((t=Object.assign({},t)).key=e,t):void 0},Le=x.a.SubMenu,Se=_.a.TabPane;function we(e){if(!e.userInfo)return"";var t=r.a.createElement(x.a,null,r.a.createElement(x.a.Item,{key:"1"},"\u4fee\u6539\u5bc6\u7801"),r.a.createElement(x.a.Divider,null),r.a.createElement(x.a.Item,{key:"2"},"\u9000\u51fa\u767b\u5f55"));return r.a.createElement("div",null,r.a.createElement("div",{className:"Home-root"},r.a.createElement("div",{className:"Home-sider"},r.a.createElement("div",{className:"Home-open-btn"},r.a.createElement(f.a,{type:"primary",onClick:e.toggleCollapsed,style:{width:"100%"}},e.isCollapse?r.a.createElement(K.a,null):r.a.createElement(D.a,null))),r.a.createElement(x.a,{theme:"light",mode:"inline",selectedKeys:[e.location.pathname],defaultOpenKeys:["category"],className:"Home-menu",inlineCollapsed:e.isCollapse,style:{width:e.isCollapse?"80px":"260px"}},r.a.createElement(x.a.Item,{key:"/home/statement",icon:r.a.createElement(g.a,null)},r.a.createElement(m.b,{to:"/home/statement"},"\u6570\u636e\u7edf\u8ba1")),r.a.createElement(Le,{key:"category",title:r.a.createElement("span",null,r.a.createElement(H.a,null),r.a.createElement("span",null,"\u5206\u7c7b\u7ba1\u7406"))},r.a.createElement(x.a.Item,{key:"/home/cate-list",icon:r.a.createElement(U.a,null)},r.a.createElement(m.b,{to:"/home/cate-list"},"\u67e5\u770b\u5206\u7c7b")),r.a.createElement(x.a.Item,{key:"/home/cate-add",icon:r.a.createElement(U.a,null)},r.a.createElement(m.b,{to:"/home/cate-add"},"\u6dfb\u52a0\u5206\u7c7b"))),r.a.createElement(Le,{key:"good",title:r.a.createElement("span",null,r.a.createElement(H.a,null),r.a.createElement("span",null,"\u5546\u54c1\u7ba1\u7406"))},r.a.createElement(x.a.Item,{key:"/home/good-list",icon:r.a.createElement(M.a,null)},r.a.createElement(m.b,{to:"/home/good-list"},"\u67e5\u770b\u5546\u54c1")),r.a.createElement(x.a.Item,{key:"/home/good-add",icon:r.a.createElement(U.a,null)},r.a.createElement(m.b,{to:"/home/good-add"},"\u6dfb\u52a0\u5546\u54c1"))),r.a.createElement(Le,{key:"order",title:r.a.createElement("span",null,r.a.createElement(H.a,null),r.a.createElement("span",null,"\u8ba2\u5355\u7ba1\u7406"))},r.a.createElement(x.a.Item,{key:"/home/order-list",icon:r.a.createElement(M.a,null)},r.a.createElement(m.b,{to:"/home/order-list"},"\u67e5\u770b\u8ba2\u5355"))),r.a.createElement(Le,{key:"swiper",title:r.a.createElement("span",null,r.a.createElement(H.a,null),r.a.createElement("span",null,"\u8f6e\u64ad\u56fe\u7ba1\u7406"))},r.a.createElement(x.a.Item,{key:"/home/swiper-edit",icon:r.a.createElement(M.a,null)},r.a.createElement(m.b,{to:"/home/swiper-edit"},"\u8bbe\u7f6e\u8f6e\u64ad\u56fe"))),r.a.createElement(Le,{key:"user",title:r.a.createElement("span",null,r.a.createElement(H.a,null),r.a.createElement("span",null,"\u7528\u6237\u7ba1\u7406"))},r.a.createElement(x.a.Item,{key:"/home/admin-add",icon:r.a.createElement(M.a,null)},r.a.createElement(m.b,{to:"/home/admin-add"},"\u6dfb\u52a0\u7ba1\u7406\u5458")),r.a.createElement(x.a.Item,{key:"/home/user-add",icon:r.a.createElement(M.a,null)},r.a.createElement(m.b,{to:"/home/user-add"},"\u6dfb\u52a0\u7528\u6237"))),r.a.createElement(Le,{key:"account",title:r.a.createElement("span",null,r.a.createElement(H.a,null),r.a.createElement("span",null,"\u8d26\u53f7"))},r.a.createElement(x.a.Item,{key:"/home/change-pass",icon:r.a.createElement(M.a,null)},r.a.createElement(m.b,{to:"/home/change-pass"},"\u4fee\u6539\u5bc6\u7801")),r.a.createElement(x.a.Item,{key:"account1",icon:r.a.createElement(M.a,null)},"\u9000\u51fa\u767b\u5f55")))),r.a.createElement("div",{className:"Home-main"},r.a.createElement("div",{className:"Home-header"},r.a.createElement("h1",{className:"Home-title"},"XXX\u5546\u54c1\u7ba1\u7406\u7cfb\u7edf"),r.a.createElement("div",{className:"Home-user-info"},e.userInfo&&r.a.createElement(R.a,{overlay:t},r.a.createElement("span",{className:"Home-user-info-label"},r.a.createElement(g.a,null),e.userInfo.account)))),r.a.createElement("div",{className:"Home-content"},r.a.createElement(_.a,{onChange:e.tabsChange,activeKey:e.location.pathname+e.location.search,type:"editable-card",hideAdd:!0,onEdit:e.tabsClose,tabBarStyle:{width:"calc(100vw - ".concat(e.isCollapse?"90":"270","px)")}},e.openedPages.map((function(t){return r.a.createElement(Se,{tab:"".concat(t.title).concat(t.name?"("+t.name+")":""),key:t.key,closable:!0},r.a.createElement("div",{className:"page-root"},r.a.createElement(t.page,{location:e.location,history:e.history,match:e.match})))})))))))}var qe=we=function(e){var t=function(t){Object(s.a)(n,t);var a=Object(u.a)(n);function n(e){var t;return Object(o.a)(this,n),(t=a.call(this,e)).state={isCollapse:!1,openedPages:[]},t.bindAll(["checkLogin","toggleCollapsed","registRouteListener","calcTabsKey","tabsChange","tabsClose"]),t}return Object(c.a)(n,[{key:"render",value:function(){return this.props.userInfo?r.a.createElement(e,Object.assign({},this.props,this.state,{checkLogin:this.checkLogin,toggleCollapsed:this.toggleCollapsed,registRouteListener:this.registRouteListener,calcTabsKey:this.calcTabsKey,tabsChange:this.tabsChange,tabsClose:this.tabsClose})):""}}]),Object(c.a)(n,[{key:"componentDidMount",value:function(){this.checkLogin()}},{key:"componentWillUnmount",value:function(){}},{key:"registRouteListener",value:function(){this.props.history.listen(this.calcTabsKey)}},{key:"calcTabsKey",value:function(e){var t=e.pathname+e.search;if(!this.state.openedPages.some((function(e){return e.key===t}))){var a=Ie(t);a&&(e.state&&e.state.name&&(a.name=e.state.name),this.state.openedPages.push(a)),this.setState({openedPages:this.state.openedPages})}}},{key:"checkLogin",value:function(){var e=this;this.props.userInfo?(this.registRouteListener(),this.calcTabsKey(this.props.location)):this.props.queryIsLogin().then((function(t){t.data.err?e.props.history.replace("/login"):(e.registRouteListener(),e.calcTabsKey(e.props.location))}))}},{key:"toggleCollapsed",value:function(){this.setState({isCollapse:!this.state.isCollapse})}},{key:"tabsChange",value:function(e){this.props.history.push(e)}},{key:"tabsClose",value:function(e){var t=this.state.openedPages.findIndex((function(t){return t.key===e}));console.log(t);var a=this.state.openedPages.slice();a.splice(t,1),a.length<=0?this.props.history.push("/home"):e===this.props.location.pathname+this.props.location.search&&this.props.history.push(a[0].key),this.setState({openedPages:a})}}]),n}(r.a.Component);return t=Object(y.b)((function(e){return{userInfo:e.userInfo}}),(function(e,t){return{queryIsLogin:function(t){return e((function(e){return w(P.isLogin).then((function(t){return t.data.err||e(L(t.data.userInfo)),Promise.resolve(t)}))}))}}}))(t)}(we),Pe=a(206),Fe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Pe.a,{spinning:this.props.isLoading},r.a.createElement(m.a,null,r.a.createElement(d.b,{exact:!0,path:"/login",component:T}),r.a.createElement(d.b,{path:"/home",component:qe}),r.a.createElement(d.b,{exact:!0,path:"/"},r.a.createElement(d.a,{to:"/home/cate-list"})))))}}]),a}(r.a.Component);var Ae=Fe=Object(y.b)((function(e){return{isLoading:e.isLoading}}))(Fe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(450);r.a.Component.prototype.bindAll=function(e){var t=this;e.forEach((function(e){t[e]=t[e].bind(t)}))};var Ne=a(221),Te=a(6);i.a.render(r.a.createElement(Te.a,{locale:Ne.a},r.a.createElement(y.a,{store:j},r.a.createElement(Ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[227,1,2]]]);
//# sourceMappingURL=main.d140a517.chunk.js.map