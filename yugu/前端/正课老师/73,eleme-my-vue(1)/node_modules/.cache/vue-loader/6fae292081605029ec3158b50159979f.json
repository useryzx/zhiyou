{"remainingRequest":"D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\src\\views\\Login.vue","mtime":1588734116012},{"path":"D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHRlbDoiIiwNCiAgICAgICAgICAgIHZhbGlkYXRlX2NvZGU6IiIsDQogICAgICAgICAgICB2YWxpZGF0ZV90b2tlbjoiIg0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIHRlbEludmFsaWRhdGUoKXsNCiAgICAgICAgICAgIGxldCByZWcgPSAvXjEzXGR7OX0kLzsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCFyZWcudGVzdCh0aGlzLnRlbCkpDQogICAgICAgICAgICByZXR1cm4gIXJlZy50ZXN0KHRoaXMudGVsKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBtZXRob2RzOiB7DQogICAgICAgIHF1ZXJ5VmFsaWRhdGVDb2RlKCl7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMuaHR0cC5wb3N0KCIvZWxlcHJvL3Jlc3RhcGkvZXVzL2xvZ2luL21vYmlsZV9zZW5kX2NvZGUiLHsNCiAgICAgICAgICAgICAgICBjYXB0Y2hhX2hhc2g6IiIsDQogICAgICAgICAgICAgICAgY2FwdGNoYV92YWx1ZToiIiwNCiAgICAgICAgICAgICAgICBtb2JpbGU6dGhpcy50ZWwsDQogICAgICAgICAgICAgICAgc2NmOiJtcyINCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAudGhlbihyZXM9PnsNCiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlX3Rva2VuID0gcmVzLmRhdGEudmFsaWRhdGVfdG9rZW47DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgDQogICAgICAgIH0sDQogICAgICAgIGxvZ2luQ2xpY2soKXsNCg0KDQogICAgICAgICAgICB0aGlzLmh0dHAucG9zdCgiL2VsZXByby9yZXN0YXBpL2V1cy9sb2dpbi9sb2dpbl9ieV9tb2JpbGUiLHsNCiAgICAgICAgICAgICAgICBtb2JpbGU6dGhpcy50ZWwsDQogICAgICAgICAgICAgICAgc2NmOiJtcyIsDQogICAgICAgICAgICAgICAgLy8g5aaC5p6c5Ye6546w5ruR5Z2X77yM5YiZ5L2/55So5a6Y5pa56aG16Z2i6I635Y+W55+t5L+h6aqM6K+B56CB77yM5bm25oqK6K+35rGC5Lit55qEdmFsaWRhdGVfdG9rZW7nspjotLTov4fmnaUNCiAgICAgICAgICAgICAgICAvLyB2YWxpZGF0ZV90b2tlbjoiYjRkYTdlZTcwYWQwNGQ0YTgyNzBiMGJmNmM5YWY1NzE0NDFhZDFiMTVkNGY1YWJkNDgzYmM4YTE5MTEzZTU1ZiIsDQogICAgICAgICAgICAgICAgdmFsaWRhdGVfdG9rZW46dGhpcy52YWxpZGF0ZV90b2tlbiwNCiAgICAgICAgICAgICAgICB2YWxpZGF0ZV9jb2RlOnRoaXMudmFsaWRhdGVfY29kZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKHJlcz0+ew0KICAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhLnVzZXJfaWQpew0KICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlcklkIixyZXMuZGF0YS51c2VyX2lkKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi91c2VyIik7DQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLnmbvlvZXlpLHotKUiKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICB9LA0KfQ0KDQovLyB3aW5kb3cub3BlbigidGVsOi8vMTM2MTM4MDAxMjkiKTsNCg0KDQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div>\r\n        <label for=\"\">手机号</label>\r\n        <input type=\"text\" v-model=\"tel\">\r\n        <br>\r\n        <button @click=\"queryValidateCode\" :disabled=\"telInvalidate\">获取验证码</button>\r\n        <br>\r\n        <input type=\"text\" placeholder=\"验证码\" v-model=\"validate_code\">\r\n\r\n\r\n        <br>\r\n        <br>\r\n        <button @click=\"loginClick\">登录</button>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            tel:\"\",\r\n            validate_code:\"\",\r\n            validate_token:\"\"\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        telInvalidate(){\r\n            let reg = /^13\\d{9}$/;\r\n            // console.log(!reg.test(this.tel))\r\n            return !reg.test(this.tel);\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        queryValidateCode(){\r\n            \r\n            this.http.post(\"/elepro/restapi/eus/login/mobile_send_code\",{\r\n                captcha_hash:\"\",\r\n                captcha_value:\"\",\r\n                mobile:this.tel,\r\n                scf:\"ms\"\r\n            })\r\n            .then(res=>{\r\n                this.validate_token = res.data.validate_token;\r\n            })\r\n            \r\n        },\r\n        loginClick(){\r\n\r\n\r\n            this.http.post(\"/elepro/restapi/eus/login/login_by_mobile\",{\r\n                mobile:this.tel,\r\n                scf:\"ms\",\r\n                // 如果出现滑块，则使用官方页面获取短信验证码，并把请求中的validate_token粘贴过来\r\n                // validate_token:\"b4da7ee70ad04d4a8270b0bf6c9af571441ad1b15d4f5abd483bc8a19113e55f\",\r\n                validate_token:this.validate_token,\r\n                validate_code:this.validate_code\r\n            })\r\n            .then(res=>{\r\n                if(res.data.user_id){\r\n                    localStorage.setItem(\"userId\",res.data.user_id);\r\n                    this.$router.push(\"/user\");\r\n                }else{\r\n                    alert(\"登录失败\");\r\n                    console.log(res.data);\r\n                }\r\n            })\r\n        }\r\n    },\r\n}\r\n\r\n// window.open(\"tel://13613800129\");\r\n\r\n\r\n</script>\r\n\r\n\r\n<style scoped>\r\n    \r\n</style>\r\n\r\n<!-- 1，填写手机号之后，调用获取验证码接口，参数需要发送手机号（如果有验证码也需要发送验证码），请求成功之后手机会受到短信，请求响应会返回validate_token -->\r\n\r\n<!-- 2，得到手机验证码validate_code和请求响应的validate_token之后，使用这两个参数调用登录接口 -->"]}]}