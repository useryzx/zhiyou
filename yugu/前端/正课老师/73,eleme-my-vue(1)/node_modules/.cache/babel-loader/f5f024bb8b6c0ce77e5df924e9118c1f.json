{"remainingRequest":"D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\node_modules\\babel-loader\\lib\\index.js!D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\src\\views\\Login.vue","mtime":1588734116012},{"path":"D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\苑振江\\github\\zhiyou\\yugu\\前端\\正课老师\\73,eleme-my-vue(1)\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0ZWw6ICIiLAogICAgICB2YWxpZGF0ZV9jb2RlOiAiIiwKICAgICAgdmFsaWRhdGVfdG9rZW46ICIiCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRlbEludmFsaWRhdGU6IGZ1bmN0aW9uIHRlbEludmFsaWRhdGUoKSB7CiAgICAgIHZhciByZWcgPSAvXjEzXGR7OX0kLzsgLy8gY29uc29sZS5sb2coIXJlZy50ZXN0KHRoaXMudGVsKSkKCiAgICAgIHJldHVybiAhcmVnLnRlc3QodGhpcy50ZWwpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgcXVlcnlWYWxpZGF0ZUNvZGU6IGZ1bmN0aW9uIHF1ZXJ5VmFsaWRhdGVDb2RlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5odHRwLnBvc3QoIi9lbGVwcm8vcmVzdGFwaS9ldXMvbG9naW4vbW9iaWxlX3NlbmRfY29kZSIsIHsKICAgICAgICBjYXB0Y2hhX2hhc2g6ICIiLAogICAgICAgIGNhcHRjaGFfdmFsdWU6ICIiLAogICAgICAgIG1vYmlsZTogdGhpcy50ZWwsCiAgICAgICAgc2NmOiAibXMiCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnZhbGlkYXRlX3Rva2VuID0gcmVzLmRhdGEudmFsaWRhdGVfdG9rZW47CiAgICAgIH0pOwogICAgfSwKICAgIGxvZ2luQ2xpY2s6IGZ1bmN0aW9uIGxvZ2luQ2xpY2soKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5odHRwLnBvc3QoIi9lbGVwcm8vcmVzdGFwaS9ldXMvbG9naW4vbG9naW5fYnlfbW9iaWxlIiwgewogICAgICAgIG1vYmlsZTogdGhpcy50ZWwsCiAgICAgICAgc2NmOiAibXMiLAogICAgICAgIC8vIOWmguaenOWHuueOsOa7keWdl++8jOWImeS9v+eUqOWumOaWuemhtemdouiOt+WPluefreS/oemqjOivgeegge+8jOW5tuaKiuivt+axguS4reeahHZhbGlkYXRlX3Rva2Vu57KY6LS06L+H5p2lCiAgICAgICAgLy8gdmFsaWRhdGVfdG9rZW46ImI0ZGE3ZWU3MGFkMDRkNGE4MjcwYjBiZjZjOWFmNTcxNDQxYWQxYjE1ZDRmNWFiZDQ4M2JjOGExOTExM2U1NWYiLAogICAgICAgIHZhbGlkYXRlX3Rva2VuOiB0aGlzLnZhbGlkYXRlX3Rva2VuLAogICAgICAgIHZhbGlkYXRlX2NvZGU6IHRoaXMudmFsaWRhdGVfY29kZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEudXNlcl9pZCkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXJJZCIsIHJlcy5kYXRhLnVzZXJfaWQpOwoKICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goIi91c2VyIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KCLnmbvlvZXlpLHotKUiKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTsgLy8gd2luZG93Lm9wZW4oInRlbDovLzEzNjEzODAwMTI5Iik7"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAkBA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,GAAA,EAAA,EADA;AAEA,MAAA,aAAA,EAAA,EAFA;AAGA,MAAA,cAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AASA,EAAA,QAAA,EAAA;AACA,IAAA,aADA,2BACA;AACA,UAAA,GAAA,GAAA,WAAA,CADA,CAEA;;AACA,aAAA,CAAA,GAAA,CAAA,IAAA,CAAA,KAAA,GAAA,CAAA;AACA;AALA,GATA;AAiBA,EAAA,OAAA,EAAA;AACA,IAAA,iBADA,+BACA;AAAA;;AAEA,WAAA,IAAA,CAAA,IAAA,CAAA,4CAAA,EAAA;AACA,QAAA,YAAA,EAAA,EADA;AAEA,QAAA,aAAA,EAAA,EAFA;AAGA,QAAA,MAAA,EAAA,KAAA,GAHA;AAIA,QAAA,GAAA,EAAA;AAJA,OAAA,EAMA,IANA,CAMA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,cAAA,GAAA,GAAA,CAAA,IAAA,CAAA,cAAA;AACA,OARA;AAUA,KAbA;AAcA,IAAA,UAdA,wBAcA;AAAA;;AAGA,WAAA,IAAA,CAAA,IAAA,CAAA,2CAAA,EAAA;AACA,QAAA,MAAA,EAAA,KAAA,GADA;AAEA,QAAA,GAAA,EAAA,IAFA;AAGA;AACA;AACA,QAAA,cAAA,EAAA,KAAA,cALA;AAMA,QAAA,aAAA,EAAA,KAAA;AANA,OAAA,EAQA,IARA,CAQA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,QAAA,EAAA,GAAA,CAAA,IAAA,CAAA,OAAA;;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA,SAHA,MAGA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA;AACA;AACA,OAhBA;AAiBA;AAlCA;AAjBA,CAAA,C,CAuDA","sourcesContent":["<template>\r\n    <div>\r\n        <label for=\"\">手机号</label>\r\n        <input type=\"text\" v-model=\"tel\">\r\n        <br>\r\n        <button @click=\"queryValidateCode\" :disabled=\"telInvalidate\">获取验证码</button>\r\n        <br>\r\n        <input type=\"text\" placeholder=\"验证码\" v-model=\"validate_code\">\r\n\r\n\r\n        <br>\r\n        <br>\r\n        <button @click=\"loginClick\">登录</button>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            tel:\"\",\r\n            validate_code:\"\",\r\n            validate_token:\"\"\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        telInvalidate(){\r\n            let reg = /^13\\d{9}$/;\r\n            // console.log(!reg.test(this.tel))\r\n            return !reg.test(this.tel);\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        queryValidateCode(){\r\n            \r\n            this.http.post(\"/elepro/restapi/eus/login/mobile_send_code\",{\r\n                captcha_hash:\"\",\r\n                captcha_value:\"\",\r\n                mobile:this.tel,\r\n                scf:\"ms\"\r\n            })\r\n            .then(res=>{\r\n                this.validate_token = res.data.validate_token;\r\n            })\r\n            \r\n        },\r\n        loginClick(){\r\n\r\n\r\n            this.http.post(\"/elepro/restapi/eus/login/login_by_mobile\",{\r\n                mobile:this.tel,\r\n                scf:\"ms\",\r\n                // 如果出现滑块，则使用官方页面获取短信验证码，并把请求中的validate_token粘贴过来\r\n                // validate_token:\"b4da7ee70ad04d4a8270b0bf6c9af571441ad1b15d4f5abd483bc8a19113e55f\",\r\n                validate_token:this.validate_token,\r\n                validate_code:this.validate_code\r\n            })\r\n            .then(res=>{\r\n                if(res.data.user_id){\r\n                    localStorage.setItem(\"userId\",res.data.user_id);\r\n                    this.$router.push(\"/user\");\r\n                }else{\r\n                    alert(\"登录失败\");\r\n                    console.log(res.data);\r\n                }\r\n            })\r\n        }\r\n    },\r\n}\r\n\r\n// window.open(\"tel://13613800129\");\r\n\r\n\r\n</script>\r\n\r\n\r\n<style scoped>\r\n    \r\n</style>\r\n\r\n<!-- 1，填写手机号之后，调用获取验证码接口，参数需要发送手机号（如果有验证码也需要发送验证码），请求成功之后手机会受到短信，请求响应会返回validate_token -->\r\n\r\n<!-- 2，得到手机验证码validate_code和请求响应的validate_token之后，使用这两个参数调用登录接口 -->"],"sourceRoot":"src/views"}]}