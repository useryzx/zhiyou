"use strict";process.env.BABEL_ENV="development",process.env.NODE_ENV="development",process.on("unhandledRejection",function(e){throw e}),require("../config/env");var fs=require("fs"),chalk=require("react-dev-utils/chalk"),webpack=require("webpack"),WebpackDevServer=require("webpack-dev-server"),clearConsole=require("react-dev-utils/clearConsole"),checkRequiredFiles=require("react-dev-utils/checkRequiredFiles"),_require=require("react-dev-utils/WebpackDevServerUtils"),choosePort=_require.choosePort,createCompiler=_require.createCompiler,prepareProxy=_require.prepareProxy,prepareUrls=_require.prepareUrls,openBrowser=require("react-dev-utils/openBrowser"),paths=require("../config/paths"),configFactory=require("../config/webpack.config"),createDevServerConfig=require("../config/webpackDevServer.config"),useYarn=fs.existsSync(paths.yarnLockFile),isInteractive=process.stdout.isTTY;checkRequiredFiles([paths.appHtml,paths.appIndexJs])||process.exit(1);var DEFAULT_PORT=parseInt(process.env.PORT,10)||8080,HOST=process.env.HOST||"0.0.0.0";process.env.HOST&&(console.log(chalk.cyan("Attempting to bind to HOST environment variable: ".concat(chalk.yellow(chalk.bold(process.env.HOST))))),console.log("If this was unintentional, check that you haven't mistakenly set it in your shell."),console.log("Learn more here: ".concat(chalk.yellow("https://bit.ly/CRA-advanced-config"))),console.log());var _require2=require("react-dev-utils/browsersHelper"),checkBrowsers=_require2.checkBrowsers;checkBrowsers(paths.appPath,isInteractive).then(function(){return choosePort(HOST,DEFAULT_PORT)}).then(function(e){var r,o,s,c,n,t,a,i,p,l,u;null!=e&&(r=configFactory("development"),o="true"===process.env.HTTPS?"https":"http",s=require(paths.appPackageJson).name,c=fs.existsSync(paths.appTsConfig),n="true"===process.env.TSC_COMPILE_ON_ERROR,t=prepareUrls(o,HOST,e,paths.publicUrlOrPath.slice(0,-1)),a=createCompiler({appName:s,config:r,devSocket:{warnings:function(e){return u.sockWrite(u.sockets,"warnings",e)},errors:function(e){return u.sockWrite(u.sockets,"errors",e)}},urls:t,useYarn:useYarn,useTypeScript:c,tscCompileOnError:n,webpack:webpack}),i=require(paths.appPackageJson).proxy,p=prepareProxy(i,paths.appPublic,paths.publicUrlOrPath),l=createDevServerConfig(p,t.lanUrlForConfig),(u=new WebpackDevServer(a,l)).listen(e,HOST,function(e){return e?console.log(e):(isInteractive&&clearConsole(),process.env.NODE_PATH&&(console.log(chalk.yellow("Setting NODE_PATH to resolve modules absolutely has been deprecated in favor of setting baseUrl in jsconfig.json (or tsconfig.json if you are using TypeScript) and will be removed in a future major release of create-react-app.")),console.log()),console.log(chalk.cyan("Starting the development server...\n")),void openBrowser(t.localUrlForBrowser))}),["SIGINT","SIGTERM"].forEach(function(e){process.on(e,function(){u.close(),process.exit()})}),!isInteractive&&"true"===process.env.CI||(process.stdin.on("end",function(){u.close(),process.exit()}),process.stdin.resume()))}).catch(function(e){e&&e.message&&console.log(e.message),process.exit(1)});