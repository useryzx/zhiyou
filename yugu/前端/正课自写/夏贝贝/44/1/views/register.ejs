<%-include('header.ejs')%>

<body>
    <form>
        <input type="text" placeholder="输入用户名" name="username" required>
        <br>
        <input type="password" placeholder="输入密码" name="password" required>
        <br>
        <input type="password" placeholder="输入密码" required>
        <br>
        <input type="email" placeholder="输入邮箱" name="email" required>
        <br>
        <button type="submit">注册</button>
    </form>
</body>
<script>
    $("form").submit(function (e) {
        console.log('????');
        e.preventDefault();
        var data = $(this).serialize();
        var pass = $('input[type=password]').map(function () {
            return $(this).val();
        })
        if (pass[0] != pass[1]) {
            return alert('两次密码不一致');
        }
        $.post('/user/register', data, function (res) {
            if (res.error == 0) {
                alert(res.msg);
                location.href = '/';
            }
            else {
                alert(res.msg)
            }
        })
    })
</script>

</html>