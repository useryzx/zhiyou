<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

</body>
<script>
    // 3.程序设计题，程序启动调用注册功能函数 提示输入账号密码和确认密码，做出对应的判断，判断没有问题之后记录注册成功的账号密码然后调用登录函数，弹出输入账号密码输入框，进行对应的登录判断，登录没有问题之后进入首页功能的函数，函数里面打印"正在读取您的好友列表,请稍等..."五遍之后，提示好友加载完成，是否要注销用户，当点击注销之后，则清空之前注册成功的账号，在用之前的账号登录则无效
    // 注意：只有注册成功的账号才可以登录!




    // 记录账号密码
    var userNameArr = [];
    var pswArr = [];

    signOrLogin();
    // 登陆还是注册
    function signOrLogin() {
        var sl = prompt("请输入数字（1.登陆2.注册）") * 1;
        if (sl == 1) {
            console.log("登陆输入");
            outLogin();
        }
        else if (sl == 2) {
            console.log("注册");
            signin();
        }
        else {
            alert("退出登陆");
            return;
        }
    }

    // 注册
    function signin() {
        console.log("输入账号密码");
        var name = prompt("请输入账号");
        var password = prompt("请输入密码");
        var password2 = prompt("请确认密码");
        for (var i = 0; i < name.length - 1; i++) {
            if (name[i] == " ") {
                alert("账号不能有空格，请重新选择");
                signOrLogin();
            }
        }
        for (var i = 0; i < password.length - 1; i++) {
            if (name[i] == " ") {
                alert("密码不能有空格，请重新选择");
                signOrLogin();
            }
        }
        for (var i = 0; i < password2.length - 1; i++) {
            if (name[i] == " ") {
                alert("确认密码不能有空格，请重新选择");
                signOrLogin();
            }
        }

        if (name == password || name == password2) {
            alert("账号和密码不能相同，请重新选择");
            signOrLogin();
        }
        else if (name == "" || password == "" || password2 == "") {
            alert("账号和密码不能为空，请重新选择");
            signOrLogin();
        }
        else if (password !== password2) {
            alert("密码不同，请重新选择");
            signOrLogin();
        }
        else {
            userNameArr.push(name);
            pswArr.push(password);
            alert("注册成功，请登录")
            outLogin();
        }
    }
    // 外层登陆
    function outLogin() {
        console.log("输入账号密码");
        var name = prompt("请输入账号");
        var password = prompt("请输入密码");
        login(name, password);
    }
    // 传参登陆
    function login(userName, psw) {
        var userNameIndex = userNameArr.indexOf(userName);
        if ((pswArr[userNameIndex] == psw)) {
            console.log("登陆成功");
            main(userName, psw);
        }
        else {
            console.log("账号或密码错误");
            alert("账号或密码错误");
            signOrLogin();
        }
    }
    // 主页
    function main(userName, psw) {
        for (var i = 0; i < 5; i++) {
            console.log("正在读取您的好友列表,请稍等...");
        }
        var logou = prompt("好友加载完成，是否要注销用户（1.注销2.回到登陆）") * 1;
        if (logou == 1) {
            console.log("注销");
            logout(userName, psw);
        }
        else if (logou == 2) {
            console.log("回到登陆");
            outLogin();
        }
        else {
            console.log("退出");
            return;
        }
    }
    // 注销
    function logout(userName, psw) {
        var indexNum = userNameArr.indexOf(userName);
        // console.log(userNameArr);
        userNameArr.splice(indexNum, 1);
        // console.log(userNameArr);
        pswArr.splice(indexNum, 1);
        console.log("已注销");
        alert("已注销");
        console.log("回到首页");
        signOrLogin();
    }




</script>

</html>