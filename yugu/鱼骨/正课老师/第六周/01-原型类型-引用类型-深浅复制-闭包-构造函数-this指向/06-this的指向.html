<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>this的指向</title>
</head>
<body>
<!-- onclick 绑定一个事件，事件被触发时，执行已经声明好的函数 -->
<button onclick="show()"> 点击 </button>


<script>

    var aa = 10;

    // 1.全局作用域中, this指向的是window对象
    // 全局变量和全局函数，都是挂载在window对象的
    console.log(this);
    // window. 可以省略不写的
//    console.log( window.aa );


    function show(){
        console.log(this);
    }
//    show();


    // 2. 在事件监听函数中，this指向的是调用该事件的标签对象本身
//    document.querySelector('button').onclick = function(){
//        console.log(this);
//    }

    // 3. 构造函数中，this指向的是生成的实例化对象

    function Cat(name, age, color){
        this.name = name;
        this.age = age;
        this.color = color;
        this.run = function(){
            console.log( this.name + '会走路' )
        }
    }
    var cat1 = new Cat('大白', 19, '黄色' );

    // 4. 在对象的函数中，this指向的当前的对象本身
    var obj = {
        name:"张三",
        age:19,
        run:function(){
            console.log(this);
        },
        props:{
            name:'李四',
            age:22,
            sing:function(){
                console.log(this);
            }
        }
    }
//    obj.run();
//    obj.props.sing();



    var obj2 = {
        name:'大白',
        age:19,
        run:function(){

            function show(){
                console.log(this);   // window对象
            }
            return show;
        },
        sing:function(){
            var that = this;

            function show(){
                console.log(that);  // obj对象
            }
            return show;
        }
    }

    obj2.run()();
    obj2.sing()();


</script>
</body>
</html>